<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Manage Venues | Sangam Event</title>
  <link rel="stylesheet" th:href="@{/css/admin-style.css}"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer"/>
</head>
<body>

<!-- Animated background elements -->
<div class="background-elements">
  <div class="bg-element bg-element-1"></div>
  <div class="bg-element bg-element-2"></div>
  <div class="bg-element bg-element-3"></div>
  <div class="bg-element bg-element-4"></div>
</div>

<header class="navbar">
  <div class="nav-container">
    <div class="logo">
      <div class="logo-icon">
        <i class="fa-solid fa-user-shield"></i>
      </div>
      <span class="logo-text">Admin Access</span>
    </div>
    <nav class="nav-links">
      <a href="/admin" th:href="@{/admin}" class="nav-link">Dashboard</a>
      <a href="/admin/requests" th:href="@{/admin/requests}" class="nav-link">Bookings</a>
      <a href="/admin/venues" th:href="@{/admin/venues}" class="nav-link active">Venues</a>
      <a href="/admin/reports" th:href="@{/admin/reports}" class="nav-link active">Reports</a>
      <a href="/admin/users" th:href="@{/admin/users}" class="nav-link active">Users</a>
      <a href="/logout" th:href="@{/logout}" class="nav-link">Logout</a>
    </nav>
  </div>
</header>

<section class="content-section">
  <div class="section-container">
    <div class="section-header">
      <div class="header-icon">
        <i class="fa-solid fa-building"></i>
      </div>
      <h1 class="section-title">Manage Venues</h1>
      <div class="section-line"></div>
      <p class="section-subtitle">Add, edit, or remove event venues from the system</p>
    </div>

    <!-- Venue Form -->
    <div class="venue-form-container">
      <div class="form-header">
        <h2 class="form-title">
          <i class="fa-solid fa-edit"></i>
          Venue Form
        </h2>
      </div>

      <form th:action="@{/admin/venues/save}" method="post" th:object="${event}" class="venue-form">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
        <input type="hidden" th:field="*{eventId}"/>

        <div class="form-grid">
          <div class="form-group">
            <label for="venueName">
              <i class="fa-solid fa-building"></i>
              Venue Name
            </label>
            <input type="text" id="venueName" th:field="*{name}" placeholder="Enter venue name" required/>
          </div>

          <div class="form-group">
            <label for="location">
              <i class="fa-solid fa-map-marker-alt"></i>
              Location
            </label>
            <input type="text" id="location" th:field="*{location}" placeholder="Enter location" required/>
          </div>

          <div class="form-group">
            <label for="address">
              <i class="fa-solid fa-address-card"></i>
              Address
            </label>
            <input type="text" id="address" th:field="*{address}" placeholder="Enter full address" required/>
          </div>

          <div class="form-group">
            <label for="time">
              <i class="fa-solid fa-clock"></i>
              Event Time
            </label>
            <input type="text" id="time" th:field="*{time}" placeholder="hh:mm:ss" required/>
          </div>

          <div class="form-group">
            <label for="capacity">
              <i class="fa-solid fa-users"></i>
              Capacity
            </label>
            <input type="text" id="capacity" th:field="*{capacity}" placeholder="Enter capacity" required/>
          </div>

          <div class="form-group">
            <label for="category">
              <i class="fa-solid fa-tag"></i>
              Category
            </label>
            <input type="text" id="category" th:field="*{category}" placeholder="Enter category" required/>
          </div>

          <div class="form-group">
            <label for="vegPrice">
              <i class="fa-solid fa-leaf"></i>
              Veg Price
            </label>
            <input type="number" id="vegPrice" th:field="*{vegPrice}" placeholder="Enter veg price" required/>
          </div>

          <div class="form-group">
            <label for="nonvegPrice">
              <i class="fa-solid fa-drumstick-bite"></i>
              Non-Veg Price
            </label>
            <input type="number" id="nonvegPrice" th:field="*{nonvegPrice}" placeholder="Enter non-veg price" required/>
          </div>

          <div class="form-group">
            <label for="decorationPrice">
              <i class="fa-solid fa-wand-magic-sparkles"></i>
              Decoration Price
            </label>
            <input type="number" id="decorationPrice" th:field="*{decorationPrice}" placeholder="Enter decoration price" required/>
          </div>

          <div class="form-group">
            <label for="image">
              <i class="fa-solid fa-image"></i>
              Venue Image
            </label>
            <input type="text" id="image" th:field="*{imageUrl}" placeholder="e.g. venue1.png" required/>
          </div>

          <div class="form-group full-width">
            <label for="description">
              <i class="fa-solid fa-align-left"></i>
              Description
            </label>
            <textarea id="description" th:field="*{description}" placeholder="Enter venue description..." required></textarea>
          </div>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn-primary">
            <i class="fa-solid fa-save"></i>
            <span>Save Venue</span>
            <div class="btn-shine"></div>
          </button>
          <button type="reset" class="btn-secondary">
            <i class="fa-solid fa-rotate-left"></i>
            <span>Reset</span>
          </button>
        </div>
      </form>
    </div>

    <!-- Venues Table -->
    <div class="venues-table-section">
      <div class="table-header">
        <h2 class="table-title">
          <i class="fa-solid fa-list"></i>
          All Venues
        </h2>
      </div>

      <div class="table-container">
        <table class="data-table venues-table">
          <thead>
          <tr>
            <th>
              <i class="fa-solid fa-image"></i>
              Image
            </th>
            <th>
              <i class="fa-solid fa-building"></i>
              Name
            </th>
            <th>
              <i class="fa-solid fa-map-marker-alt"></i>
              Location
            </th>
            <th>
              <i class="fa-solid fa-address-card"></i>
              Address
            </th>
            <th>
              <i class="fa-solid fa-clock"></i>
              Time
            </th>
            <th>
              <i class="fa-solid fa-users"></i>
              Capacity
            </th>
            <th>
              <i class="fa-solid fa-tag"></i>
              Category
            </th>
            <th>
              <i class="fa-solid fa-leaf"></i>
              Veg
            </th>
            <th>
              <i class="fa-solid fa-drumstick-bite"></i>
              Non-Veg
            </th>
            <th>
              <i class="fa-solid fa-wand-magic-sparkles"></i>
              Decoration
            </th>
            <th>
              <i class="fa-solid fa-tasks"></i>
              Actions
            </th>
          </tr>
          </thead>
          <tbody>
          <tr th:each="venue : ${venues}">
            <td>
              <div class="venue-image-wrapper">
                <img th:src="@{${venue.imageUrl}}" alt="Venue Image" class="venue-image"/>
              </div>
            </td>
            <td>
              <span class="venue-name" th:text="${venue.name}">Venue Name</span>
            </td>
            <td>
              <span class="location-text" th:text="${venue.location}">Location</span>
            </td>
            <td>
              <span class="address-text" th:text="${venue.address}">Address</span>
            </td>
            <td>
              <span class="time-text" th:text="${venue.time}">00:00:00</span>
            </td>
            <td>
              <span class="capacity-badge" th:text="${venue.capacity}">100</span>
            </td>
            <td>
              <span class="category-badge" th:text="${venue.category}">Category</span>
            </td>
            <td>
              <span class="price-text">₹<span th:text="${venue.vegPrice}">0</span></span>
            </td>
            <td>
              <span class="price-text">₹<span th:text="${venue.nonvegPrice}">0</span></span>
            </td>
            <td>
              <span class="price-text">₹<span th:text="${venue.decorationPrice}">0</span></span>
            </td>
            <td>
              <div class="action-buttons-group">
                <form th:action="@{/admin/venues/edit/{id}(id=${venue.eventId})}" method="get" style="display:inline;">
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                  <button type="submit" class="btn-edit" title="Edit Venue">
                    <i class="fa-solid fa-edit"></i>
                    Edit
                  </button>
                </form>
                <form th:action="@{/admin/venues/delete/{id}(id=${venue.eventId})}" method="post" style="display:inline;">
                  <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                  <button type="submit" class="btn-delete" title="Delete Venue" onclick="return confirm('Are you sure you want to delete this venue?');">
                    <i class="fa-solid fa-trash"></i>
                    Delete
                  </button>
                </form>
              </div>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
    </div>

    <div class="action-buttons">
      <a href="/admin" th:href="@{/admin}" class="back-button">
        <i class="fa-solid fa-arrow-left"></i>
        <span>Back to Dashboard</span>
        <div class="btn-shine"></div>
      </a>
    </div>
  </div>
</section>

<footer class="footer">
  <div class="footer-content">
    <p>&copy; 2025 Sangam. Admin Panel - All rights reserved.</p>
  </div>
</footer>

</body>
</html>
